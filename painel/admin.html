<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Painel Administrativo - Moda Online</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="admin.css">
  <!-- Supabase Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <script>
    const supabaseUrl = 'https://hylttfhaedvytykjpeze.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5bHR0ZmhhZWR2eXR5a2pwZXplIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MTE1MDgsImV4cCI6MjA3NDI4NzUwOH0.e0BmMYbBC9QBI6TNsKgWUckFqCPnjPGEAq6-7h1W18A';

    // O 'supabase' aqui é o objeto global da biblioteca. Criamos o cliente
    // e o atribuímos a window.supabase para torná-lo global para outros scripts.
    const supaClient = supabase.createClient(supabaseUrl, supabaseKey);
    window.supabase = supaClient;

    // Nova função para verificar o acesso de administrador
    const checkAdminAccess = async () => {
      // 1. Verifica se há uma sessão ativa
      const { data: { session }, error: sessionError } = await supaClient.auth.getSession();
      if (!session || sessionError) {
        window.location.href = "../login.html";
        return;
      }

      // 2. Se há sessão, busca o perfil do usuário logado
      const user = session.user;
      const { data: profile, error: profileError } = await supaClient
        .from('profiles')
        .select('role')
        .eq('id', user.id)
        .single();

      // 3. Verifica se o usuário tem uma das permissões autorizadas
      const allowedRoles = ['admin', 'manager', 'seller'];
      if (profileError || !profile || !allowedRoles.includes(profile.role)) {
        // Se não tiver permissão, desloga (por segurança) e redireciona
        await supaClient.auth.signOut();
        alert('Acesso negado. Você não tem permissão para acessar esta página.');
        window.location.href = "../index.html";
        return;
      }

      // Se tudo estiver certo, o usuário é um admin e pode continuar na página.
    };

    checkAdminAccess();
  </script>

  <!-- APP -->
  <div class="d-flex" id="app">
    <!-- Sidebar -->
    <aside class="sidebar d-flex flex-column p-3">
      <a href="#" class="brand d-flex align-items-center mb-4 text-decoration-none">
        <div class="avatar">MA</div>
        <span class="fs-5">Moda Online</span>
      </a>
      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item" data-page="panel">
          <a href="#" class="nav-link active" onclick="navigate(event)"><i class="fa-solid fa-table-columns me-2"></i>Painel</a>
        </li>
        <li class="nav-item" data-page="produtos">
          <a href="#" class="nav-link" onclick="navigate(event)"><i class="fa-solid fa-box-archive me-2"></i>Produtos</a>
        </li>
        <li class="nav-item" data-page="financeiro">
          <a href="#" class="nav-link" onclick="navigate(event)"><i class="fa-solid fa-chart-pie me-2"></i>Financeiro</a>
        </li>
        <li class="nav-item" data-page="estoque">
          <a href="#" class="nav-link" onclick="navigate(event)"><i class="fa-solid fa-boxes-stacked me-2"></i>Estoque</a>
        </li>
        <li class="nav-item" data-page="categorias">
          <a href="#" class="nav-link" onclick="navigate(event)"><i class="fa-solid fa-tags me-2"></i>Categorias</a>
        </li>
        <li class="nav-item" data-page="usuarios">
          <a href="#" class="nav-link" onclick="navigate(event)"><i class="fa-solid fa-users-gear me-2"></i>Usuários</a>
        </li>
        <li class="nav-item" data-page="orders">
          <a href="#" class="nav-link" onclick="navigate(event)"><i class="fa-solid fa-receipt me-2"></i>Pedidos</a>
        </li>
      </ul>
      <hr>
      <button class="btn btn-danger" id="btnLogout"><i class="fa-solid fa-right-from-bracket me-2"></i>Sair</button>
    </aside>

    <!-- Main Content -->
    <main class="main-content flex-grow-1 p-4">
      <header class="d-flex justify-content-between align-items-center mb-4">
        <h1 id="pageTitle" class="h3 mb-0">Painel</h1>
        <div class="d-flex align-items-center">
          <span class="badge bg-success-subtle text-success-emphasis rounded-pill me-3">Online</span>
          <img src="https://i.pravatar.cc/40" class="rounded-circle" alt="User" id="user-avatar" style="width: 40px; height: 40px; object-fit: cover;">
        </div>
      </header>

      <!-- Summary Cards -->
      <div class="row mb-4" id="summaryCards">
        <div class="col-xl-3 col-md-6 mb-3">
          <div class="card h-100">
            <div class="card-body d-flex align-items-center justify-content-between">
              <div>
                <h6 class="card-subtitle text-muted mb-1">Total de Produtos</h6>
                <h4 class="card-title mb-0" id="totalProdutos">0</h4>
              </div>
              <div class="card-icon bg-primary-subtle text-primary"><i class="fa-solid fa-box-archive"></i></div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-3">
          <div class="card h-100">
            <div class="card-body d-flex align-items-center justify-content-between">
              <div>
                <h6 class="card-subtitle text-muted mb-1">Receita Total</h6>
                <h4 class="card-title mb-0" id="totalReceita">R$0.00</h4>
              </div>
              <div class="card-icon bg-success-subtle text-success"><i class="fa-solid fa-dollar-sign"></i></div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-3">
          <div class="card h-100">
            <div class="card-body d-flex align-items-center justify-content-between">
              <div>
                <h6 class="card-subtitle text-muted mb-1">Despesas Totais</h6>
                <h4 class="card-title mb-0" id="totalDespesas">R$0.00</h4>
              </div>
              <div class="card-icon bg-danger-subtle text-danger"><i class="fa-solid fa-arrow-trend-down"></i></div>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-3">
          <div class="card h-100">
            <div class="card-body d-flex align-items-center justify-content-between">
              <div>
                <h6 class="card-subtitle text-muted mb-1">Itens em Falta</h6>
                <h4 class="card-title mb-0" id="itensFalta">0</h4>
              </div>
              <div class="card-icon bg-warning-subtle text-warning"><i class="fa-solid fa-triangle-exclamation"></i></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Page Sections -->
      <section id="panel" class="page">
        <div class="row">
          <div class="col-lg-7 mb-4">
            <div class="card h-100">
              <div class="card-header">Atividades Recentes</div>
              <div class="card-body">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><i class="fa-solid fa-check-circle text-success me-2"></i>Sistema de gestão de produtos ativo</li>
                  <li class="list-group-item"><i class="fa-solid fa-check-circle text-success me-2"></i>Controle financeiro habilitado</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-5 mb-4">
            <div class="card h-100">
              <div class="card-header">Ações Rápidas</div>
              <div class="card-body">
                <div class="row">
                  <div class="col-6 mb-3"><button class="btn btn-outline-primary w-100 h-100 p-3" onclick="openAddProduct()"><i class="fa-solid fa-plus d-block mb-2"></i>Adicionar Produto</button></div>
                  <div class="col-6 mb-3"><button class="btn btn-outline-success w-100 h-100 p-3" onclick="showPage('financeiro')"><i class="fa-solid fa-hand-holding-dollar d-block mb-2"></i>Adicionar Receita</button></div>
                  <div class="col-6 mb-3"><button class="btn btn-outline-info w-100 h-100 p-3" onclick="showReport()"><i class="fa-solid fa-chart-line d-block mb-2"></i>Ver Relatórios</button></div>
                  <div class="col-6 mb-3"><button class="btn btn-outline-secondary w-100 h-100 p-3" onclick="showPage('usuarios')"><i class="fa-solid fa-users-cog d-block mb-2"></i>Gerenciar Usuários</button></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="produtos" class="page" style="display:none;">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Produtos</h5>
            <button class="btn btn-primary" onclick="openAddProduct()"><i class="fa-solid fa-plus me-2"></i>Adicionar Produto</button>
          </div>
          <div class="card-body">
            <p class="card-text text-muted">Gerencie seus produtos: adicione nome, categoria, preço e estoque.</p>
            <div class="table-responsive">
              <table class="table table-hover align-middle" id="prodTable">
                <thead>
                  <tr>
                    <th>IMAGEM</th>
                    <th>PRODUTO</th>
                    <th>CATEGORIA</th>
                    <th>PREÇO</th>
                    <th>ESTOQUE</th>
                    <th>STATUS</th>
                    <th class="text-end">AÇÕES</th>
                  </tr>
                </thead>
                <tbody id="prodBody"></tbody>
              </table>
            </div>
            <div id="prodEmpty" class="text-center p-5" style="display:none;">
              <i class="fa-solid fa-clipboard-list fa-3x text-muted mb-3"></i>
              <h5 class="mb-1">Nenhum produto cadastrado</h5>
              <p class="text-muted">Adicione produtos para começar a controlar seu estoque.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="financeiro" class="page" style="display:none;">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">Controle Financeiro</h5>
          </div>
          <div class="card-body">
            <div class="row mb-4">
              <div class="col-md-4">
                <div class="card text-center bg-success-subtle">
                  <div class="card-body">
                    <h6 class="card-subtitle text-muted">Receita Total</h6>
                    <h4 class="mb-0" id="rReceita">R$0.00</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card text-center bg-danger-subtle">
                  <div class="card-body">
                    <h6 class="card-subtitle text-muted">Despesas Totais</h6>
                    <h4 class="mb-0" id="rDespesas">R$0.00</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card text-center bg-primary-subtle">
                  <div class="card-body">
                    <h6 class="card-subtitle text-muted">Lucro Líquido</h6>
                    <h4 class="mb-0" id="rLucro">R$0.00</h4>
                  </div>
                </div>
              </div>
            </div>
            <button class="btn btn-success mb-3" onclick="toggleFinForm()"><i class="fa-solid fa-plus me-2"></i>Adicionar Registro</button>
            <div id="finForm" class="p-3 border rounded mb-4" style="display:none;">
              <form onsubmit="return addFinance(event)">
                <div class="row g-3">
                  <div class="col-md-3"><label class="form-label">Tipo</label><select id="fTipo" class="form-select">
                      <option value="receita">Receita</option>
                      <option value="despesa">Despesa</option>
                    </select></div>
                  <div class="col-md-3"><label class="form-label">Valor (R$)</label><input id="fValor" type="number" class="form-control" step="0.01" min="0" required /></div>
                  <div class="col-md-3"><label class="form-label">Categoria</label><input id="fCategoria" type="text" class="form-control" /></div>
                  <div class="col-md-3"><label class="form-label">Descrição</label><input id="fDescricao" type="text" class="form-control" /></div>
                </div>
                <div class="mt-3"><button class="btn btn-primary">Salvar</button><button type="button" class="btn btn-secondary ms-2" onclick="toggleFinForm()">Cancelar</button></div>
              </form>
            </div>
            <h6 class="mt-4">Transações Recentes</h6>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>TIPO</th>
                    <th>VALOR</th>
                    <th>CATEGORIA</th>
                    <th>DESCRIÇÃO</th>
                  </tr>
                </thead>
                <tbody id="finBody"></tbody>
              </table>
            </div>
            <div id="finEmpty" class="text-center p-5" style="display:none;">
              <i class="fa-solid fa-dollar-sign fa-3x text-muted mb-3"></i>
              <h5 class="mb-1">Nenhum registro financeiro</h5>
              <p class="text-muted">Adicione sua primeira transação para começar.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="estoque" class="page" style="display:none;">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">Controle de Estoque</h5>
          </div>
          <div class="card-body">
            <div class="row mb-4">
              <div class="col-md-4">
                <div class="card text-center bg-success-subtle">
                  <div class="card-body">
                    <h6 class="card-subtitle text-muted">Em Estoque</h6>
                    <h4 class="mb-0" id="estoqueEm">0</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card text-center bg-warning-subtle">
                  <div class="card-body">
                    <h6 class="card-subtitle text-muted">Estoque Baixo</h6>
                    <h4 class="mb-0" id="estoqueBaixo">0</h4>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card text-center bg-danger-subtle">
                  <div class="card-body">
                    <h6 class="card-subtitle text-muted">Sem Estoque</h6>
                    <h4 class="mb-0" id="estoqueZero">0</h4>
                  </div>
                </div>
              </div>
            </div>
            <h6>Todos os Produtos</h6>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>PRODUTO</th>
                    <th>CATEGORIA</th>
                    <th>PREÇO</th>
                    <th>ESTOQUE</th>
                    <th>STATUS</th>
                  </tr>
                </thead>
                <tbody id="stockBody"></tbody>
              </table>
            </div>
            <div id="stockEmpty" class="text-center p-5" style="display:none;">
              <i class="fa-solid fa-boxes-stacked fa-3x text-muted mb-3"></i>
              <h5 class="mb-1">Nenhum dado de estoque</h5>
              <p class="text-muted">Adicione produtos para rastrear o estoque.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="categorias" class="page" style="display:none;">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Gerenciar Categorias</h5>
            <button class="btn btn-primary" onclick="addNewCategory()"><i class="fa-solid fa-plus me-2"></i>Adicionar Categoria</button>
          </div>
          <div class="card-body">
            <p class="card-text text-muted">Adicione, edite ou remova categorias de produtos.</p>
            <div class="table-responsive">
              <table class="table table-hover" id="catTable">
                <thead>
                  <tr>
                    <th>NOME DA CATEGORIA</th>
                    <th class="text-end">AÇÕES</th>
                  </tr>
                </thead>
                <tbody id="catBody"></tbody>
              </table>
            </div>
            <div id="catEmpty" class="text-center p-5" style="display:none;">
              <i class="fa-solid fa-tags fa-3x text-muted mb-3"></i>
              <h5 class="mb-1">Nenhuma categoria cadastrada</h5>
              <p class="text-muted">Adicione categorias para organizar seus produtos.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="usuarios" class="page" style="display:none;">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Gerenciamento de Usuários</h5>
            <div class="d-flex align-items-center">
              <div class="me-3">
                <select id="userRoleFilter" class="form-select form-select-sm" onchange="renderUsersList()">
                  <option value="all">Todos os Cargos</option>
                  <option value="admin">Administradores</option>
                  <option value="manager">Gerentes</option>
                  <option value="seller">Vendedores</option>
                  <option value="user">Usuários</option>
                </select>
              </div>
              <button class="btn btn-primary" onclick="openAddUserModal()"><i class="fa-solid fa-user-plus me-2"></i>Adicionar Usuário</button>
            </div>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table id="userTable" class="table table-hover align-middle">
                <thead>
                  <tr>
                    <th>NOME</th>
                    <th>EMAIL</th>
                    <th>PERMISSÃO</th>
                    <th>STATUS</th>
                    <th class="text-end">AÇÕES</th>
                  </tr>
                </thead>
                <tbody id="userBody"></tbody>
              </table>
            </div>
            <div id="userEmpty" class="text-center p-5" style="display:none;">
              <i class="fa-solid fa-users-slash fa-3x text-muted mb-3"></i>
              <h5 class="mb-1">Nenhum usuário encontrado</h5>
              <p class="text-muted">Adicione usuários para começar a gerenciar.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="orders" class="page" style="display:none;">
        <div class="card">
          <div class="card-header">
            <div class="d-flex flex-wrap justify-content-between align-items-center">
              <h5 class="mb-2 me-3">Pedidos Recebidos</h5>
              <div class="btn-group" role="group">
                <button class="btn btn-sm btn-outline-secondary btn-filter active" id="filterAll" onclick="setOrderFilter('all')">Todos</button>
                <button class="btn btn-sm btn-outline-secondary btn-filter" id="filterPending" onclick="setOrderFilter('pending')">Pendentes</button>
                <button class="btn btn-sm btn-outline-secondary btn-filter" id="filterShipped" onclick="setOrderFilter('shipped')">Enviados</button>
                <button class="btn btn-sm btn-outline-secondary btn-filter" id="filterFinalized" onclick="setOrderFilter('finalized')">Finalizados</button>
                <button class="btn btn-sm btn-outline-secondary btn-filter" id="filterCanceled" onclick="setOrderFilter('canceled')">Cancelados</button>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="row mb-3">
              <div class="col-md-8"><input id="ordersSearch" class="form-control" placeholder="Buscar por ID, nome ou e-mail do cliente" oninput="renderOrdersList()"></div>
              <div class="col-md-4 text-end"><button class="btn btn-secondary" onclick="toggleOrdersView()" id="toggleViewBtn">Ver em Tabela</button></div>
            </div>
            <div id="ordersList"></div>
            <div id="ordersEmpty" class="text-center p-5" style="display:none;">
              <i class="fa-solid fa-receipt fa-3x text-muted mb-3"></i>
              <h5 class="mb-1">Nenhum pedido encontrado</h5>
              <p class="text-muted">Não há pedidos que correspondam aos filtros atuais.</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modals -->
  <!-- Product Modal -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="productModalTitle">Adicionar Novo Produto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="prodForm" onsubmit="return saveProduct(event)">
            <div class="row mb-3">
              <div class="col-md-8"><label class="form-label">Produto</label><input id="pNome" type="text" class="form-control" required placeholder="Nome do produto" /></div>
              <div class="col-md-4"><label class="form-label">Categoria</label>
                <div class="input-group"><select id="pCategoria" class="form-select" required>
                    <option value="">Carregando...</option>
                  </select><button type="button" id="btnNovaCategoria" class="btn btn-outline-secondary">+</button></div>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-6"><label class="form-label">Preço (R$)</label><input id="pPreco" type="number" class="form-control" step="0.01" min="0" placeholder="0.00" /></div>
              <div class="col-md-6"><label class="form-label">Estoque</label><input id="pEstoque" type="number" class="form-control" min="0" value="0" /></div>
            </div>
            <div class="mb-3"><label class="form-label">Descrição</label><textarea id="pDescricao" class="form-control" rows="3" placeholder="Descrição detalhada do produto..."></textarea></div>
            <div class="mb-3"><label class="form-label">Imagem do Produto</label><input type="file" id="pImagem" class="form-control" accept="image/png, image/jpeg, image/webp"></div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary" id="productSubmitButton">Adicionar Produto</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- User Modal -->
  <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="userModalLabel">Adicionar Novo Usuário</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="userForm" onsubmit="return saveUser(event)">
            <div class="row mb-3">
              <div class="col-md-6"><label class="form-label">Nome Completo</label><input type="text" id="uNome" class="form-control" required></div>
              <div class="col-md-6"><label class="form-label">Email</label><input type="email" id="uEmail" class="form-control" required></div>
            </div>
            <div class="mb-3"><label class="form-label">Senha</label><input type="password" id="uSenha" class="form-control" placeholder="Mínimo 6 caracteres"><small class="form-text text-muted">Deixe em branco ao editar para não alterar a senha.</small></div>
            <div class="row mb-3">
              <div class="col-md-6"><label class="form-label">Permissão (Role)</label><select id="uPermissao" class="form-select" required>
                  <option value="user">Usuário</option>
                  <option value="admin">Administrador</option>
                  <option value="manager">Gerente</option>
                  <option value="seller">Vendedor</option>
                </select></div>
              <div class="col-md-6"><label class="form-label">Status</label><select id="uStatus" class="form-select" required>
                  <option value="active">Ativo</option>
                  <option value="inactive">Inativo</option>
                </select></div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary" id="userSubmitButton">Adicionar Usuário</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Order Detail Modal -->
  <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-labelledby="orderDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="orderDetailModalLabel">Detalhes do Pedido <span id="detailOrderId"></span></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="orderDetailBody"></div>
        <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button></div>
      </div>
    </div>
  </div>

  <!-- Order Status Modal -->
  <div class="modal fade" id="orderStatusModal" tabindex="-1" aria-labelledby="orderStatusModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="orderStatusModalLabel">Alterar Status do Pedido <span id="statusOrderId"></span></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="statusForm" onsubmit="event.preventDefault(); confirmOrderStatusChange();">
            <label for="modalStatusSelect" class="form-label">Novo Status:</label>
            <select id="modalStatusSelect" class="form-select" required>
              <option value="pending">Pendente</option>
              <option value="waiting_payment">Aguardando Pagamento</option>
              <option value="paid">Pago</option>
              <option value="shipped">Enviado</option>
              <option value="delivered">Entregue</option>
              <option value="canceled">Cancelado</option>
              <option value="finalized">Finalizado</option>
            </select>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary">Confirmar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header border-0">
          <h5 class="modal-title" id="confirmationModalLabel">Confirmar Ação</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="confirmationModalBody">
          Você tem certeza que deseja continuar?
        </div>
        <div class="modal-footer border-0">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-danger" id="confirmActionButton">Confirmar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification Container -->
  <div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3"></div>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Custom JS -->
  <script src="admin.js"></script>
</body>

</html>